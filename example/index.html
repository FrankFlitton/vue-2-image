<html>
<head>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="../dist/vue-2-img.js"></script>
    <link href="../dist/vue-2-img.css" rel="stylesheet"></link>

    <style>
        .chart {
            min-width: 310px;
            width: 100%;
            height: 400px;
            margin: 0 auto;
        }
        body {
            background: aliceblue;
        }
    </style>
</head>
<body>

    <div class="pageTarget">
        <h1>Bar Chart Example</h1>
        <div
            class="chart"
            id="container1"
        ></div>
    </div>

    <div class="pageTarget">
        <h1>Pie Chart Example</h1>
        <div
            class="chart"
            id="container2"
        ></div>
    </div>

    <p>
        Wait for auto export.
    </p>

    <script>
        // Build Chart 1
        $.getJSON('https://cdn.rawgit.com/highcharts/highcharts/057b672172ccc6c08fe7dbb27fc17ebca3f5b770/samples/data/usdeur.json', function (data) {
        Highcharts.chart('container1', {
            chart: {
                zoomType: 'x'
            },
            title: {
                text: 'USD to EUR exchange rate over time'
            },
            subtitle: {
                text: document.ontouchstart === undefined
                ? 'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'
            },
            xAxis: {
                type: 'datetime'
            },
            yAxis: {
                title: {
                text: 'Exchange rate'
                }
            },
            legend: {
                enabled: false
            },
            plotOptions: {
                area: {
                fillColor: {
                    linearGradient: {
                    x1: 0,
                    y1: 0,
                    x2: 0,
                    y2: 1
                    },
                    stops: [
                    [0, Highcharts.getOptions().colors[0]],
                    [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                    ]
                },
                marker: {
                    radius: 2
                },
                lineWidth: 1,
                states: {
                    hover: {
                    lineWidth: 1
                    }
                },
                threshold: null
                }
            },

            series: [{
                type: 'area',
                name: 'USD to EUR',
                data: data
            }]
            })
        }
        )

        // Build Chart 2
        Highcharts.chart('container2', {
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'pie'
            },
            title: {
                text: 'Browser market shares in January, 2018'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    },
                    connectorColor: 'silver'
                },
                colors: [{
                    radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                    },
                    stops: [
                        [0, Highcharts.Color('#42b983').get('rgb')],
                        [1, Highcharts.Color('#42b983').brighten(-0.3).get('rgb')] // darken
                    ]
                },
                {
                    radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                    },
                    stops: [
                        [0, Highcharts.Color('#42aaff').get('rgb')],
                        [1, Highcharts.Color('#42aaff').brighten(-0.3).get('rgb')] // darken
                    ]
                },
                {
                    radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                    },
                    stops: [
                        [0, Highcharts.Color('#AA00FF').get('rgb')],
                        [1, Highcharts.Color('#AA00FF').brighten(-0.3).get('rgb')] // darken
                    ]
                },
                {
                    radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                    },
                    stops: [
                        [0, Highcharts.Color('#4233ff').get('rgb')],
                        [1, Highcharts.Color('#4233ff').brighten(-0.3).get('rgb')] // darken
                    ]
                },
                {
                    radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                    },
                    stops: [
                        [0, Highcharts.Color('#ff22aa').get('rgb')],
                        [1, Highcharts.Color('#ff22aa').brighten(-0.3).get('rgb')] // darken
                    ]
                },
                {
                    radialGradient: {
                    cx: 0.5,
                    cy: 0.3,
                    r: 0.7
                    },
                    stops: [
                        [0, Highcharts.Color('#AA0000').get('rgb')],
                        [1, Highcharts.Color('#AA0000').brighten(-0.3).get('rgb')] // darken
                    ]
                }
                ]
                }
            },
            series: [{
                name: 'Share',
                data: [{
                name: 'Chrome',
                y: 61.41
                },
                {
                name: 'Internet Explorer',
                y: 11.84
                },
                {
                name: 'Firefox',
                y: 10.85
                },
                {
                name: 'Edge',
                y: 4.67
                },
                {
                name: 'Safari',
                y: 4.18
                },
                {
                name: 'Other',
                y: 7.05
                }
                ]
            }]
            })

        setTimeout(function () {
            console.log('printing!')
            let config = {
                pageHeight: null,
                pageWidth: null
            }
            // imageCapture().image()
            imageCapture().pdf(config)
        }, 5000)
    </script>
</body>
</html>